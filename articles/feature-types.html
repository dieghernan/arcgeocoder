<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reverse geocoding and feature types • arcgeocoder</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="feature-types_files/libs/quarto-html/popper.min.js"></script><script src="feature-types_files/libs/quarto-html/tippy.umd.min.js"></script><link href="feature-types_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="feature-types_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reverse geocoding and feature types">
<meta property="og:image" content="https://dieghernan.github.io/arcgeocoder/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@dhernangomez">
<meta name="twitter:site" content="@dhernangomez">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-BMYBJTKBY0"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BMYBJTKBY0');
</script><!-- gitdevr tweaks --><link href="../BS5/gitdevr.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html"><img src="../apple-touch-icon.png" alt="arcgeocoder logo" height="34" width="34" class="d-inline-block me-1">arcgeocoder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/arcgeocoder.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explore arcgeocoder
    </h6></li>
    <li><a class="dropdown-item" href="../articles/feature-types.html">Reverse geocoding and feature types</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Mapping with arcgeocoder</h6></li>
    <li><a class="dropdown-item" href="../articles/static.html">arcgeocoder and static maps</a></li>
    <li><a class="dropdown-item" href="../articles/leaflet.html">arcgeocoder and leaflet maps</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dieghernan/arcgeocoder/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Reverse geocoding and feature types</h1>




      <small class="dont-index">Source: <a href="https://github.com/dieghernan/arcgeocoder/blob/release/vignettes/feature-types.qmd" class="external-link"><code>vignettes/feature-types.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <!-- feature-types.qmd is generated from feature-types.qmd.orig. Please edit that file --><p><em>Adapted from <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-reverse-geocode.htm" class="external-link uri">https://developers.arcgis.com/rest/geocode/api-reference/geocoding-reverse-geocode.htm</a></em></p>
<section class="level2"><h2 id="reverse-geocoding-details">Reverse geocoding details<a class="anchor" aria-label="anchor" href="#reverse-geocoding-details"></a>
</h2>
<p>The purpose of reverse geocoding is to answer the question: What’s near this location? To answer this question, the <code>reverseGeocode</code> operation provided by the <strong>ArcGIS REST API</strong> returns the most relevant feature near an input location based on a prioritized hierarchy of feature types.</p>
<p>The hierarchy is summarized in the table below, ordered by descending priority. Unless otherwise noted, each feature type is only returned when the distance between the input location and the feature is within the tolerance specified in the <em>Search Tolerance</em> column.</p>
<div id="tbl-hier" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><div aria-describedby="tbl-hier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>Feature type</th>
<th>Search tolerance</th>
<th>Comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>StreetInt</code></td>
<td>10 meters</td>
<td>Intersections are only returned when <code>featuretypes = "StreetInt"</code> is included in the request.</td>
</tr>
<tr class="even">
<td>
<code>StreetAddress</code> (near), <code>DistanceMarker</code>, or <code>StreetName</code>
</td>
<td>3 meters</td>
<td>Candidates of type <code>StreetName</code> are only returned if <code>featureTypes = "streetName"</code> is included in the request.</td>
</tr>
<tr class="odd">
<td>
<code>POI</code> centroid</td>
<td>25 meters</td>
<td>A business or landmark that can be represented by a point.</td>
</tr>
<tr class="even">
<td><code>Subaddress</code></td>
<td>10 meters</td>
<td>
<code>Subaddress</code> candidates, which can be features such as apartments or floors in a building, maybe not being returned under certain conditions.</td>
</tr>
<tr class="odd">
<td><code>PointAddress</code></td>
<td>50 meters</td>
<td>A <code>PointAddress</code> match is not returned if it is on the opposite side of the street as the input location, even if it is within 50 meters of the location.</td>
</tr>
<tr class="even">
<td>
<code>StreetAddress</code> (distant), <code>DistanceMarker</code>, or <code>StreetName</code>
</td>
<td>100 meters</td>
<td>Candidates of type <code>StreetName</code> are only returned if <code>featuretypes = "StreetName"</code> is included in the request.</td>
</tr>
<tr class="odd">
<td>
<code>POI</code> area</td>
<td>within boundary</td>
<td>A business or landmark that can be represented by an area, such as a large park or university. Not available in all countries.</td>
</tr>
<tr class="even">
<td>
<code>Postal</code> or <code>Locality</code> area</td>
<td>within boundary</td>
<td>If the input location intersects multiple boundaries, the feature with the smallest area is returned.</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-hier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 1: Adapted from ArcGIS REST API <code>reverseGeocode</code>
</figcaption></figure>
</div>
<p>In <strong>arcgeocoder</strong>, this hierarchy is implemented in <code><a href="../reference/arc_reverse_geo.html">arc_reverse_geo()</a></code>, specifically through the <code>featuretypes</code> argument. The default value (<code>featuretypes = NULL</code>) does not include the argument in the API call. In this case, the hierarchy presented in the previous table would apply.</p>
<p>It is possible to narrow down the output of the query to a specific feature type or a list of feature types. The possible values supported for this argument are:</p>
<ul>
<li><code>"StreetInt"</code></li>
<li><code>"DistanceMarker"</code></li>
<li><code>"StreetAddress"</code></li>
<li><code>"StreetName"</code></li>
<li><code>"POI"</code></li>
<li><code>"Subaddress"</code></li>
<li><code>"PointAddress"</code></li>
<li><code>"Postal"</code></li>
<li><code>"Locality"</code></li>
</ul>
<p>As mentioned, is to possible to include several feature types. If more than one value is specified for the argument, the values must be separated by a comma, with no spaces after the comma.</p>
<section class="level3"><h3 id="single-featuretypes-value">single <code>featuretypes</code> value<a class="anchor" aria-label="anchor" href="#single-featuretypes-value"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span><span class="va">...</span>, featuretypes <span class="op">=</span> <span class="st">"PointAddress"</span><span class="op">)</span></span></code></pre></div>
</section><section class="level3"><h3 id="multiple-featuretypes-value">multiple <code>featuretypes</code> value<a class="anchor" aria-label="anchor" href="#multiple-featuretypes-value"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span><span class="va">...</span>, featuretypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PointAddress"</span>, <span class="st">"StreetAddress"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</section></section><section class="level2"><h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>In the following examples, we would provide different examples for better understanding.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/arcgeocoder/">arcgeocoder</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<section class="level3"><h3 id="example-1-match-to-poi-centroid-returned">Example 1: Match to <code>POI</code> centroid returned<a class="anchor" aria-label="anchor" href="#example-1-match-to-poi-centroid-returned"></a>
</h3>
<p>In this example, we do not provide any value to the <code>featuretypes</code> argument. This input location is within the search tolerance of both <code>POI</code> and <code>PointAddress</code> features, but a match to the <code>POI</code> centroid is returned because it has a higher priority (see <a href="#tbl-hier" class="quarto-xref">Table 1</a>). Note that the output field <code>Addr_type</code> indicates the type of feature.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_x</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">117.196324</span></span>
<span><span class="va">example_y</span> <span class="op">&lt;-</span> <span class="fl">34.059217</span></span>
<span></span>
<span><span class="va">api_poi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">example_x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">example_y</span>,</span>
<span>  langcode <span class="op">=</span> <span class="st">"EN"</span>,</span>
<span>  full_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">api_poi</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">address</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">Addr_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 47%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
<th style="text-align: right;">lon</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Addr_type</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05922</td>
<td style="text-align: left;">1025-1141 W Park Ave, Redlands, CA, 92373, USA</td>
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05917</td>
<td style="text-align: left;">StreetAddress</td>
</tr></tbody>
</table></section><section class="level3"><h3 id="example-2-streetaddress-match-returned">Example 2: <code>StreetAddress</code> match returned<a class="anchor" aria-label="anchor" href="#example-2-streetaddress-match-returned"></a>
</h3>
<p>We specify here the type of feature we want to get using <code>featuretypes = "StreetAddress"</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api_address</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">example_x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">example_y</span>,</span>
<span>  featuretypes <span class="op">=</span> <span class="st">"StreetAddress"</span>,</span>
<span>  langcode <span class="op">=</span> <span class="st">"EN"</span>,</span>
<span>  full_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">api_address</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">address</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">Addr_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 47%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
<th style="text-align: right;">lon</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Addr_type</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05922</td>
<td style="text-align: left;">1025-1141 W Park Ave, Redlands, CA, 92373, USA</td>
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05917</td>
<td style="text-align: left;">StreetAddress</td>
</tr></tbody>
</table></section><section class="level3"><h3 id="example-3-locality-match-returned">Example 3: <code>Locality</code> match returned<a class="anchor" aria-label="anchor" href="#example-3-locality-match-returned"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api_local</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">example_x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">example_y</span>,</span>
<span>  featuretypes <span class="op">=</span> <span class="st">"Locality"</span>,</span>
<span>  langcode <span class="op">=</span> <span class="st">"EN"</span>,</span>
<span>  full_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">api_local</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">address</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">Addr_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 27%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
<th style="text-align: right;">lon</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Addr_type</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05922</td>
<td style="text-align: left;">Redlands, CA, USA</td>
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05922</td>
<td style="text-align: left;">Locality</td>
</tr></tbody>
</table></section><section class="level3"><h3 id="example-4-multiple-values">Example 4: multiple values<a class="anchor" aria-label="anchor" href="#example-4-multiple-values"></a>
</h3>
<p>When multiple values are included in the API call, the hierarchy explained in <a href="#tbl-hier" class="quarto-xref">Table 1</a> would still be applied on the requested <code>featuretypes</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api_multiple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">example_x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">example_y</span>,</span>
<span>  featuretypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Locality"</span>, <span class="st">"StreetInt"</span>, <span class="st">"StreetAddress"</span><span class="op">)</span>,</span>
<span>  langcode <span class="op">=</span> <span class="st">"EN"</span>,</span>
<span>  full_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">api_multiple</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">address</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">Addr_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 47%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
<th style="text-align: right;">lon</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Addr_type</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05922</td>
<td style="text-align: left;">1025-1141 W Park Ave, Redlands, CA, 92373, USA</td>
<td style="text-align: right;">-117.1963</td>
<td style="text-align: right;">34.05917</td>
<td style="text-align: left;">StreetAddress</td>
</tr></tbody>
</table></section><section class="level3"><h3 id="example-5-no-results-for-specific-featuretypes">Example 5: No results for specific <code>featuretypes</code>
<a class="anchor" aria-label="anchor" href="#example-5-no-results-for-specific-featuretypes"></a>
</h3>
<p>In the following example we present a case where only certain <code>featuretypes</code> are near the requested location. In this case, when reverse geocoding the North Pole the API would return a <code>Locality</code> but no <code>StreetAddress</code> is found.</p>
<p>When it is not possible to return results, <code><a href="../reference/arc_reverse_geo.html">arc_reverse_geo()</a></code> returns an empty <strong>tibble</strong>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># North Pole</span></span>
<span></span>
<span><span class="va">npole</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">90</span>, langcode <span class="op">=</span> <span class="st">"EN"</span>, full_results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">npole</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">address</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">Addr_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
<th style="text-align: right;">lon</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Addr_type</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">90</td>
<td style="text-align: left;">Ozero Shybyndy</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">90</td>
<td style="text-align: left;">POI</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># But no StreetAddress</span></span>
<span><span class="va">npole2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/arc_reverse_geo.html">arc_reverse_geo</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">90</span>,</span>
<span>  langcode <span class="op">=</span> <span class="st">"EN"</span>,</span>
<span>  full_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  featuretypes <span class="op">=</span> <span class="st">"StreetAddress"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">npole2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: left;">address</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">90</td>
<td style="text-align: left;">NA</td>
</tr></tbody>
</table></section></section><section class="level2"><h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The API would return different results for the same <code>x,y</code> values depending on the value of <code>featuretypes</code>. By using <code>featuretypes = NULL</code> the feature type returned would depend on the hierarchy explained in <a href="#tbl-hier" class="quarto-xref">Table 1</a>.</p>
<p>Depending on the location, the <code>featuretypes</code> filter may not return results, hence for general purposes using <code>featuretypes = NULL</code> is safer.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://dieghernan.github.io/" class="external-link">Diego Hernangómez</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
